{"version":3,"sources":["hooks/useModal.tsx","views/ReducerDemo.tsx","router/index.ts","views/HookDemo.tsx","views/CodeView.tsx","views/Home.tsx","views/NotFound.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Modal","show","onCancel","content","className","join","tabIndex","role","type","data-dismiss","aria-label","onClick","aria-hidden","TActionType","initList","initListFunc","initData","map","item","text","keyId","nanoid","reducer","data","action","copyData","add","unshift","remove","filter","search","reset","Error","router","path","exact","component","useState","toggleShow","setContent","fn","console","log","onShow","useModal","source","setSource","themes","theme","setTheme","themeValue","setThemeValue","copyStatus","setCopyStatus","useLocation","souceOrigin","URLSearchParams","get","suffix","useEffect","a","fetch","res","getSourceCode","id","defaultValue","onChange","e","target","value","Object","keys","index","onCopy","setTimeout","disabled","language","style","useReducer","list","dispatchList","placeholder","ev","trim","link","to","App","pathname","matched","useRouteMatch","rel","href","substr","route","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dc25f9d3.chunk.js","sourcesContent":["import { useState } from \"react\"\n\ntype TModalProps = {\n  show: boolean\n  content: string\n  onCancel: (event: React.MouseEvent) => void\n}\n\nfunction Modal({show = false, onCancel, content}: TModalProps) {\n  return (\n    <div className={[\"modal\", show ? 'd-block' : ''].join(' ')} tabIndex={-1} role=\"dialog\">\n      <div className=\"modal-dialog\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5 className=\"modal-title\">Modal title</h5>\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\n              onClick={onCancel}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div className=\"modal-body\">\n            <p>{content}</p>\n          </div>\n          <div className=\"modal-footer\">\n            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={onCancel}>Close</button>\n            <button type=\"button\" className=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function useModal(){\n  const [show, toggleShow] = useState(false)\n  const [content, setContent] = useState('dsd')\n  const onCancel = (fn?: any) => {\n    toggleShow(!show)\n    console.log(fn)\n    if (typeof fn === 'function') {\n      fn()\n    }\n  }\n  const onShow = () => {\n    toggleShow(!show)\n  }\n\n  return [\n    <Modal\n      content={content}\n      show={show}\n      onCancel={onCancel}\n    />,\n    {\n      onCancel,\n      onShow,\n      setContent\n    }\n  ] as (JSX.Element & {\n    [key: string]: (event: React.MouseEvent) => void\n  } &  {\n    [key: string]: React.Dispatch<React.SetStateAction<string>>\n  })[]\n}","import { useReducer } from \"react\"\nimport {nanoid} from \"nanoid\"\n\ntype TListItem = {\n  keyId: string\n  text: string\n}\n\nenum TActionType {\n  add,\n  remove,\n  reset,\n  search\n}\n\ntype TAction = {\n  type: TActionType\n  keyId?: string\n}\n\nconst initList: TListItem[] = [] // reduer 初始化数据，空数组\n\nfunction initListFunc(initData: TListItem[]) { // reducer 数据初始化函数，加工初始化数据，将初始化数据作为默认参数\n  const textArr = [\n    '关于 react/fre',\n    'egg.js 中grpc的正确使用方式是什么？',\n    '深入理解函数调用原理'\n  ]\n  initData = textArr.map(item => ({\n    text: item,\n    keyId: nanoid(5)\n  }))\n  return initData\n}\n\n// reducer 函数返回开发所需目标数据\nfunction reducer(data: TListItem[], action: TAction) {\n  let copyData = [...data] // 保证返回的是 data 副本（有可能是浅拷贝）\n  switch (action.type) { // 更新数据方式（类型）：action.type\n    case TActionType.add: // 通过 add 方式更新数据\n      copyData.unshift({\n        text: nanoid(),\n        keyId: nanoid(5)\n      })\n      break\n    case TActionType.remove:\n      copyData = copyData.filter(item => item.keyId !== action.keyId)\n      break\n    case TActionType.search:\n      if (action.keyId) {\n        copyData = copyData.filter(item => item.keyId === action.keyId)\n      } else {\n        copyData = initListFunc(initList) // 调用 reducer 初始化函数进行数据重置\n      }\n      break\n    case TActionType.reset:\n      copyData = initListFunc(initList) // 调用 reducer 初始化函数进行数据重置\n      break\n    default:\n      throw new Error(`${action.type} 错误`)\n  }\n  return copyData\n}\n\n\nexport default function ReducerDemo() {\n  // list 是初始化数据\n  // dispatchList 类型为函数，更新数据触发器\n  const [list, dispatchList] = useReducer(reducer, initList, initListFunc)\n  return (\n    <div className=\"text-center\">\n      <input type=\"text\"\n        className=\"form-control\"\n        placeholder=\"输入 id 搜索\"\n        onChange={(ev) => dispatchList({ // dispatchList 触发 search 类型更新列表\n          type: TActionType.search,\n          keyId: ev.target.value.trim()\n        })}\n      />\n      <ul className=\"list-group my-4\">\n        {\n          list.map(item => (\n            <li\n              className=\"list-group-item d-flex align-items-center justify-content-between\"\n              key={item.keyId}\n            >\n              <p>\n                <span className=\"badge badge-info h5 mr-3\">{item.keyId}</span>\n                {item.text}\n              </p>\n              <div>\n                <button\n                  className=\"btn btn-primary\"\n                  onClick={() => dispatchList({\n                    type: TActionType.add\n                  })}\n                >新增 item</button>\n                <button\n                  className=\"btn btn-primary ml-3\"\n                  onClick={() => dispatchList({\n                    type: TActionType.remove, // dispatchList 触发 remove 类型更新列表\n                    keyId: item.keyId.trim()\n                  })}\n                >移除 item</button>\n              </div>\n            </li>\n          ))\n        }\n      </ul>\n      <button\n        className=\"btn btn-primary\"\n        onClick={() => dispatchList({\n          type: TActionType.reset\n        })}\n      >重置 item</button>\n    </div>\n  )\n}\n","import CodeView from '../views/CodeView'\nimport Home from '../views/Home'\nimport HookDemo from '../views/HookDemo'\nimport NotFound from '../views/NotFound'\nimport ReducerDemo from '../views/ReducerDemo'\n\nconst router = [{\n  path: '/hookdemo',\n  exact: true,\n  component: HookDemo\n}, {\n  path: '/codeview',\n  exact: true,\n  component: CodeView\n}, {\n  path: '/reducerdemo',\n  exact: true,\n  component: ReducerDemo\n}, {\n  path: '/',\n  exact: true,\n  component: Home\n}, {\n  path: '',\n  component: NotFound\n}]\n\nexport default router","import { useModal } from \"../hooks/useModal\"\n\nexport default function HookDemo() {\n  const [Modal, {onShow, setContent}] = useModal()\n  return (\n    <>\n      {Modal}\n      <h3> Hook Modal </h3>\n      <button className=\"btn btn-primary\" onClick={onShow}>打开 Moal</button>\n      <button className=\"btn btn-primary\" onClick={() => setContent('3233ss')}>修改内容</button>\n    </>\n  )\n}","import { useEffect, useState } from 'react';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport * as themes from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport { useLocation } from 'react-router-dom';\n\nexport default function CodeView() {\n  const [source, setSource] = useState('')\n  const [theme, setTheme] = useState(themes['okaidia'])\n  const [themeValue, setThemeValue] = useState('okaidia')\n  const [copyStatus, setCopyStatus] = useState(false)\n  const {search} = useLocation()\n  const souceOrigin = (new URLSearchParams(search)).get('origin')\n  const suffix = (new URLSearchParams(search)).get('suffix') || 'tsx'\n\n  useEffect(() => {\n    async function getSourceCode() {\n      let res =  await fetch(`https://cos.ap-beijing.myqcloud.com/public-data-1254963092/readme-source/${souceOrigin}.${suffix}`)\n      let data = await res.text()\n      setSource(data)\n    }\n    getSourceCode()\n  }, [souceOrigin, suffix])\n  return (\n    <div className=\"d-flex flex-column h100p overflow-hidden\">\n      <div className=\"d-flex pb-2 align-items-center justify-content-between\">\n        <h4>源码演示</h4>\n        <div className=\"d-flex align-items-center\">\n          <div className=\"input-group \">\n            <div className=\"input-group-prepend\">\n              <span className=\"input-group-text\" id=\"basic-addon1\">当前主题：</span>\n            </div>\n            <select\n              className=\"form-control w-auto\"\n              defaultValue={themeValue}\n              onChange={e => {\n                let themeValue = e.target.value\n                setThemeValue(themeValue)\n                setTheme((themes as any)[themeValue])\n              }}\n            >\n              {\n                Object.keys(themes).map((item, index) => (\n                  <option\n                    value={item}\n                    key={index}>\n                    {item}\n                  </option>\n                ))\n              }\n            </select>\n          </div>\n          <CopyToClipboard text={source}\n            onCopy={() => {\n              setCopyStatus(true)\n              setTimeout(() => {\n                setCopyStatus(false)\n              }, 800)\n            }}\n          >\n            <button\n              className={['btn ml-5 nowrap', copyStatus ? 'btn-success' : 'btn-primary'].join(' ')}\n              disabled={copyStatus}\n            >\n              {copyStatus ? '复制成功' : '一键复制'}\n            </button>\n          </CopyToClipboard>\n        </div>\n      </div>\n      <div className=\"flex1 ovy-auto mb-5\">\n        <SyntaxHighlighter language=\"javascript\" style={theme}>\n          {source}\n        </SyntaxHighlighter>\n      </div>\n    </div>\n  )\n}","import { useState } from \"react\"\nimport { NavLink } from \"react-router-dom\"\n\nexport default function Home() {\n  const [list] = useState([{\n    text: 'React userReducer 深入认知 »',\n    link: '/ReducerDemo'\n  }])\n  return (\n    <>\n      <h4 className=\"mb-3 text-center\">教程示例</h4>\n      <ul className=\"list-group\">\n        <li className=\"list-group-item\">\n          {\n            list.map(item => <NavLink key={item.text} to={item.link}>{item.text}</NavLink>)\n          }\n        </li>\n      </ul>\n    </>\n  )\n}","export default function NotFound() {\n  return (\n    <>\n      <h3>not found</h3>\n    </>\n  )\n}","import { NavLink, Route, Switch, useLocation, useRouteMatch } from \"react-router-dom\";\nimport router from './router'\n\nfunction App() {\n  let {pathname} = useLocation()\n  let matched = useRouteMatch('/ReducerDemo')\n\n  return (\n    <div className=\"app container pt-3\">\n      {\n        matched\n        ? (\n          <div className=\"text-right mb-3\">\n            <a target=\"_blank\" rel=\"noreferrer\" href=\"https://readme.codermore.com/2021/01/11/%E5%89%8D%E7%AB%AF%E5%8F%A3%E8%A2%8B%E5%B0%8F%E5%86%8C-%E7%AC%AC36%E6%9C%9F/\">\n              <button className=\"btn btn-primary mr-3\">教程详情</button>\n            </a>\n            <NavLink to={`codeview?origin=${pathname.substr(1)}`}>\n              <button className=\"btn btn-primary\">查看源码</button>\n            </NavLink>\n          </div>\n        )\n        : null\n      }\n      <Switch>\n        {\n          router.map(route => (\n            <Route\n              key={route.path}\n              path={route.path}\n              exact={route.exact}\n              component={route.component}\n            />\n          ))\n        }\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import './index.css'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {HashRouter as Router} from \"react-router-dom\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}